@if (providerInfo != null) {
    <div class="w-full grid grid-cols-1 text-sm px-2 py-3 gap-2 rounded-md bg-dark-matter hover:bg-dark-matter/50 items-center-safe justify-center-safe transition-colors duration-200 ease-out">
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-1 items-center-safe justify-center-safe">
            <div class="flex flex-col items-start justify-start gap-0.5">
                <div class="flex flex-row flex-wrap items-center-safe justify-center-safe gap-2">
                    <p class="font-bold">{{ providerInfo.provider_name | removeUnderscore }}</p>

                    <div class="text-[10px] px-2 border rounded-md bg-soma-dark2 border-soma-dark hover:border-soma-purple cursor-default transition-colors duration-200 ease-out">
                        <p>{{ providerInfo.provider_type }}</p>
                    </div>
                </div>
                <p class="text-xs text-gray-400 break-all">{{ providerInfo.base_url }}</p>
            </div>
            

            <div class="flex flex-row flex-wrap w-full items-center-safe justify-end-safe gap-3 text-sm">
            
                @if (providerInfo.provider_type === "CLOUD") {
                    <input [formControl]="inputKeyValue" [value]="providerInfo.api_key" class="flex-1 p-1.5 text-gray-400 border rounded-md border-gray-500" type="password" placeholder="Insert your API key">
                           
                    <button 
                        (click)="makeRequest()" 
                        [disabled]="isUpdating() || isDeleting()"
                        title="Update"
                        class="p-2 rounded-md hover:bg-blue-400/20 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center min-w-[40px]">
                        
                        @if (isUpdating()) {
                            <svg class="animate-spin h-4 w-4 text-soma-purple" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                        } @else {
                            <i class="fi fi-br-refresh text-blue-400"></i>
                        }
                    </button>

                    <button 
                        (click)="deleteKey()" 
                        [disabled]="isUpdating() || isDeleting()"
                        title="Delete"
                        class="p-2 rounded-md hover:bg-red-900/20 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center min-w-[40px]">
                        
                        @if (isDeleting()) {
                            <svg class="animate-spin h-4 w-4 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                        } @else {
                            <i class="fi fi-br-trash text-red-600"></i>
                        }
                    </button>
                } @else {
                    <p class="text-gray-400">No API key is needed</p>
                }
            
            </div>
        </div>

        @if (responseAlert != null && responseAlert().length > 0) {
            <div class="flex flex-row items-center p-1.5 gap-2 justify-center text-center rounded-md bg-blue-400/60 hover:bg-blue-400/80 transition-colors duration-200 ease-out">
                <i class="fi fi-sr-info"></i>
                <p class="font-bold">{{ responseAlert() }}</p>
            </div>
        }

    </div>

} @else {
    <div class="w-full grid grid-cols-1 md:grid-cols-2 gap-1 text-sm items-center-safe justify-center-safe px-2 py-3 rounded-md bg-dark-matter hover:bg-dark-matter/50 transition-colors duration-200 ease-out">
        <div class="flex flex-col items-start justify-start gap-0.5">
            <app-loading-data></app-loading-data>
            <app-loading-data></app-loading-data>
        </div>
        
        <div class="flex flex-row flex-wrap w-full items-center-safe justify-end-safe gap-3 text-sm">
            <app-loading-data></app-loading-data>
            <app-loading-data></app-loading-data>
            <app-loading-data></app-loading-data>
        </div>
    </div>
}